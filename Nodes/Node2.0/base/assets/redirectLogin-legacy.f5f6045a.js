System.register(["./index-legacy.3cb5b087.js"],(function(t){"use strict";var e,s,i,n,a,o,r,d;return{setters:[function(t){e=t.A,s=t.u,i=t.bO,n=t.bP,a=t.bQ,o=t.bR,r=t.j,d=t.o}],execute:function(){const c=s(),u={class:"redlrectLogin"};t("default",e({name:"redirectLogin",data:()=>({finPageName:"登录页面"}),mounted(){this.openLoading(),this.login()},methods:{_addMenuRouter:t=>addMenuRouter.getISCMenuRouter(t).then((t=>t)),async getTransmissionMode(){const{encryptFlag:t,whiteList:e}=await this.$hi_http(i)(),s=n.exports.sm.decrypt({encryptValue:e.V,encryptKey:e.C}).data;c.$patch({iscUrlWhiteList:s,transmissionMode:t})},async login(){await this.getTransmissionMode();const t=await this.getUrlParams(),{result:e}=await this.$hi_http(a)(t),s=e.additionalInfo.menu_list?e.additionalInfo.menu_list.children:[],i=await this._addMenuRouter(s);this.$store.state.roleName=e.additionalInfo.roleName,this.$store.state.appId=e.additionalInfo.appId,this.$store.state.tenantId=e.additionalInfo.tenantId,delete e.additionalInfo.menu_list,this.setSystems({accessTokenResultVO:e}),this.setAppid(e.additionalInfo.appId),setStorage("hyit:menuRouterData",i),this.$router.addRoutes(i),this.$router.push({name:"home"})},async getUrlParams(){const t=window.location.hash.slice(1),e={};t&&t.split("&").forEach((t=>{const[s,i]=t.split("=");e[s]=i}));const s=0===Object.keys(e).length,{accessToken:i}=c.system;return i?(this.$router.push("/home"),Promise.reject()):s?Promise.reject():s?void 0:(this.setIscToken(e.access_token),Promise.resolve(e))},openLoading(){o.service({background:"rgba(0, 0, 0, 0.3)"})}}},[["render",function(t,e,s,i,n,a){return d(),r("div",u)}],["__file","E:/project/主工程/fin-main-app/src/views/redirectLogin.vue"]]))}}}));
