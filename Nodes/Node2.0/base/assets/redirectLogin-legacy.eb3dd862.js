!function(){function e(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(s){u=!0,o=s}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t,r,n,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void r(c)}u.done?t(s):Promise.resolve(s).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function u(e){r(i,o,a,u,s,"next",e)}function s(e){r(i,o,a,u,s,"throw",e)}u(void 0)}))}}System.register(["./index-legacy.056db433.js"],(function(t){"use strict";var r,o,a,i,u,s,c,l;return{setters:[function(e){r=e.A,o=e.u,a=e.bO,i=e.bP,u=e.bQ,s=e.bR,c=e.j,l=e.o}],execute:function(){var f=o(),d={class:"redlrectLogin"};t("default",r({name:"redirectLogin",data:function(){return{finPageName:"登录页面"}},mounted:function(){this.openLoading(),this.login()},methods:{_addMenuRouter:function(e){return addMenuRouter.getISCMenuRouter(e).then((function(e){return e}))},getTransmissionMode:function(){var e=this;return n(regeneratorRuntime.mark((function t(){var r,n,o,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$hi_http(a)();case 2:r=t.sent,n=r.encryptFlag,o=r.whiteList,u=i.exports.sm.decrypt({encryptValue:o.V,encryptKey:o.C}).data,f.$patch({iscUrlWhiteList:u,transmissionMode:n});case 7:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return n(regeneratorRuntime.mark((function t(){var r,n,o,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTransmissionMode();case 2:return t.next=4,e.getUrlParams();case 4:return r=t.sent,t.next=7,e.$hi_http(u)(r);case 7:return n=t.sent,o=n.result,a=o.additionalInfo.menu_list?o.additionalInfo.menu_list.children:[],t.next=12,e._addMenuRouter(a);case 12:i=t.sent,e.$store.state.roleName=o.additionalInfo.roleName,e.$store.state.appId=o.additionalInfo.appId,e.$store.state.tenantId=o.additionalInfo.tenantId,delete o.additionalInfo.menu_list,e.setSystems({accessTokenResultVO:o}),e.setAppid(o.additionalInfo.appId),setStorage("hyit:menuRouterData",i),e.$router.addRoutes(i),e.$router.push({name:"home"});case 22:case"end":return t.stop()}}),t)})))()},getUrlParams:function(){var t=this;return n(regeneratorRuntime.mark((function r(){var n,o,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=window.location.hash.slice(1),o={},n&&n.split("&").forEach((function(t){var r=e(t.split("="),2),n=r[0],a=r[1];o[n]=a})),a=0===Object.keys(o).length,!f.system.accessToken){r.next=10;break}return t.$router.push("/home"),r.abrupt("return",Promise.reject());case 10:if(!a){r.next=14;break}return r.abrupt("return",Promise.reject());case 14:if(a){r.next=17;break}return t.setIscToken(o.access_token),r.abrupt("return",Promise.resolve(o));case 17:case"end":return r.stop()}}),r)})))()},openLoading:function(){s.service({background:"rgba(0, 0, 0, 0.3)"})}}},[["render",function(e,t,r,n,o,a){return l(),c("div",d)}],["__file","E:/project/主工程/fin-main-app/src/views/redirectLogin.vue"]]))}}}))}();
