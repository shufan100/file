<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
</html>
<script>
  function Element({ tagName, props, children }) {
    // 判断必须使用构造函数
    if (!(this instanceof Element)) {
      return new Element({ tagName, props, children })
    }
    this.tagName = tagName
    this.props = props || {}
    this.children = children || []
  }

  Element.prototype.render = function () {
    var el = document.createElement(this.tagName),
      props = this.props,
      propName,
      propValue
    for (propName in props) {
      propValue = props[propName]
      el.setAttribute(propName, propValue)
    }
    this.children.forEach(function (child) {
      var childEl = null
      if (child instanceof Element) {
        childEl = child.render()
      } else {
        childEl = document.createTextNode(child)
      }
      el.appendChild(childEl)
    })
    return el
  }

  // 执行
  var elem = Element({
    tagName: 'ul',
    props: { class: 'list' },
    children: [Element({ tagName: 'li', children: ['item1'] }), Element({ tagName: 'li', children: ['item2'] })],
  })
  document.querySelector('body').appendChild(elem.render())

  // var elem1 = Element({
  //   tagName: 'ul',
  //   props: { class: 'list' },
  // })
  // console.log(elem1)
</script>
