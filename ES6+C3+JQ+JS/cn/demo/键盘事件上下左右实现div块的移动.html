<!DOCTYPE html>
<html lang="en">
    
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
        <script src="../../js/Method.js"></script>
    </head>
    
    <body>
        <script>var div;
            var code = [];
            var speed = 2;
            var bool = false;
            init();
            function init() {
                div = Method.$c("div", document.body, {
                    width: "50px",
                    height: "50px",
                    backgroundColor: "red",
                    position: "absolute",
                    left: 0,
                    top: 0
                });
                window.addEventListener("keydown", keyHandler);
                window.addEventListener("keyup", keyHandler);
                setInterval(animation, 16);
            }

            function keyHandler(e) {
                if (e.type === "keydown" && (!bool || code.indexOf(e.keyCode) === -1)) {
                    bool = true;
                    code.push(e.keyCode);
                } else if (e.type === "keyup") {
                    bool = false;
                    code.length = 0;
                }
            }

            function animation() {
                if (!bool) return;
                for (var i = 0; i < code.length; i++) {
                    switch (code[i]) {
                    case 37:
                        div.style.left = div.offsetLeft - speed + "px";
                        break;
                    case 38:
                        div.style.top = div.offsetTop - speed + "px";
                        break;
                    case 39:
                        div.style.left = div.offsetLeft + speed + "px";
                        break;
                    case 40:
                        div.style.top = div.offsetTop + speed + "px";
                        break;
                    }
                }
            }</script>
    </body>

</html>